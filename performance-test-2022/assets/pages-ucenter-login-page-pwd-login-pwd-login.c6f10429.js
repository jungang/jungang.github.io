import{G as e,W as a,R as s,s as o,o as t,c as n,w as i,b as r,d as l,t as c,e as d,f as p,I as u,l as m,m as g,i as h}from"./index.45e10b73.js";import{_ as f}from"./uni-captcha.0a325143.js";import{r as w}from"./uni-app.es.af6e5358.js";import{_ as L}from"./uni-agreements.8ffb9f86.js";import{_}from"./uni-quick-login.e139723e.js";import{m as k}from"./login-page.mixin.166cdfe7.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.4aeae8d3.js";import"./loginSuccess.4a3b8f3c.js";var C=b({mixins:[k],data:()=>({password:"",username:"",agree:!1,captcha:"",needCaptcha:!1}),computed:{canLogin(){return this.username.length&&this.isPwd&&this.agree},isPwd(){return/^.{6,20}$/.test(this.password)},isPhone(){return/^1\d{10}$/.test(this.phone)}},methods:{toRetrievePwd(){e({url:"../pwd-retrieve/pwd-retrieve?phoneNumber="+(this.isPhone?this.username:"")+"&phoneArea="+this.currenPhoneArea})},pwdLogin(){if(!this.agree)return a({title:this.$t("common.noAgree"),icon:"none"});s.callFunction({name:"uni-id-cf",data:{action:"login",params:{username:this.username,password:this.password,captcha:this.captcha}},success:({result:e})=>{console.log(e),0===e.code?this.loginSuccess(e):e.needCaptcha?(a({title:e.msg||"完成",icon:"none"}),this.needCaptcha=!0):o({title:this.$t("common.error"),content:e.msg,showCancel:!1,confirmText:this.$t("common.gotIt")})}})},toRegister(a){console.log(a),e({url:"/pages/ucenter/login-page/register/register"})}}},[["render",function(e,a,s,o,k,b){const C=p,$=u,j=w(m("uni-captcha"),f),x=w(m("uni-agreements"),L),P=g,V=h,v=w(m("uni-quick-login"),_);return t(),n(V,{class:"content"},{default:i((()=>[r(C,{class:"title"},{default:i((()=>[l(c(e.$t("pwdLogin.pwdLogin")),1)])),_:1}),r($,{class:"input-box",inputBorder:!1,modelValue:k.username,"onUpdate:modelValue":a[0]||(a[0]=e=>k.username=e),placeholder:e.$t("pwdLogin.placeholder")},null,8,["modelValue","placeholder"]),r($,{type:"password",class:"input-box",inputBorder:!1,modelValue:k.password,"onUpdate:modelValue":a[1]||(a[1]=e=>k.password=e),placeholder:e.$t("pwdLogin.passwordPlaceholder")},null,8,["modelValue","placeholder"]),k.needCaptcha?(t(),n(j,{key:0,scene:"login",modelValue:k.captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>k.captcha=e)},null,8,["modelValue"])):d("",!0),r(x,{class:"agreement",onSetAgree:a[3]||(a[3]=e=>k.agree=e)}),r(P,{class:"send-btn",disabled:!b.canLogin,type:b.canLogin?"primary":"default",onClick:b.pwdLogin},{default:i((()=>[l(c(e.$t("pwdLogin.login")),1)])),_:1},8,["disabled","type","onClick"]),r(V,{class:"auth-box"},{default:i((()=>[r(C,{class:"link",onClick:b.toRetrievePwd},{default:i((()=>[l(c(e.$t("pwdLogin.forgetPassword")),1)])),_:1},8,["onClick"]),r(C,{class:"link",onClick:b.toRegister},{default:i((()=>[l(c(e.$t("pwdLogin.register")),1)])),_:1},8,["onClick"])])),_:1}),r(v,{agree:k.agree,ref:"uniQuickLogin"},null,8,["agree"])])),_:1})}],["__scopeId","data-v-1a74d166"]]);export{C as default};
