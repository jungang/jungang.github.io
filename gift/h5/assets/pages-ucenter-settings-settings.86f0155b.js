var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,l=(e,t)=>{for(var i in t||(t={}))s.call(t,i)&&a(e,i,t[i]);if(n)for(var i of n(t))o.call(t,i)&&a(e,i,t[i]);return e},r=(e,n)=>t(e,i(n));import{J as c,T as u,a as g,g as p,a9 as d,ao as h,n as f,P as m,Q as v,a5 as b,O as k,ap as I,R as O,aq as $,a7 as L,ar as x,E as T,a4 as P,o as y,c as A,w as S,b as _,q as j,j as E,t as C,f as w,l as N,i as M}from"./index.9588ac03.js";import{_ as R}from"./uni-list-item.0b0db49f.js";import{r as U}from"./uni-app.es.3623048a.js";import{_ as D}from"./uni-list.5c1dec51.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.66bbb871.js";function q(){var e=void 0;try{if("iOS"==plus.os.name){var t=0,i=plus.ios.invoke("UIApplication","sharedApplication"),n=plus.ios.invoke(i,"currentUserNotificationSettings");n?(t=n.plusGetAttribute("types"),plus.ios.deleteObject(n)):t=plus.ios.invoke(i,"enabledRemoteNotificationTypes"),plus.ios.deleteObject(i),e=0!=t}else{var s=plus.android.runtimeMainActivity(),o=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");e=plus.android.invoke(o,"isPushTurnedOn",s)}}catch(a){console.error("exception in isTurnedOnPush@dc-push!!")}return e}function z(){try{if("iOS"==plus.os.name){var e=plus.ios.invoke("UIApplication","sharedApplication"),t=plus.ios.invoke("NSURL","URLWithString:","app-settings:");plus.ios.invoke(e,"openURL:",t),plus.ios.deleteObject(t),plus.ios.deleteObject(e)}}catch(i){console.error("exception in settingInIos@dc-push!!")}}var F={isOn:q,iosSetting:z,on:function(){try{if("iOS"==plus.os.name)q()||z();else{var e=plus.android.runtimeMainActivity(),t=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");plus.android.invoke(t,"turnOnPush",e)}}catch(i){console.error("exception in turnOnPush@dc-push!!")}},off:function(){try{if("iOS"==plus.os.name);else{var e=plus.android.runtimeMainActivity(),t=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");plus.android.invoke(t,"turnOffPush",e)}}catch(i){console.error("exception in trunOffPush@dc-push!!")}},setting:function(){"ios"==c().platform&&z(),"android"==c().platform&&function(){if("android"==c().platform){var e=plus.android.runtimeMainActivity(),t=new(plus.android.importClass("android.content.Intent"))(plus.android.importClass("android.provider.Settings").ACTION_APPLICATION_DETAILS_SETTINGS);e.startActivity(t)}}()}};var H=G({data:()=>({pushServer:F,supportMode:[],pushIsOn:"wait",currentLanguage:""}),computed:r(l({},u({userInfo:"user/info",hasLogin:"user/hasLogin"})),{i18nEnable:()=>g().globalData.config.i18n.enable}),onLoad(){this.currentLanguage="en"==p("CURRENT_LANG")?"English":"简体中文",d({title:this.$t("settings.navigationBarTitle")})},onShow(){},methods:r(l({},h({logout:"user/logout"})),{toEdit(){f({url:"/pages/ucenter/userinfo/userinfo"})},deactivate(){f({url:"/pages/ucenter/settings/deactivate/deactivate"})},changePwd(){f({url:"/pages/ucenter/login-page/pwd-retrieve/pwd-retrieve?phoneNumber="+(this.userInfo&&this.userInfo.mobile?this.userInfo.mobile:""),fail:e=>{console.log(e)}})},startSoterAuthentication(e){console.log(e);let t={fingerPrint:this.$t("settings.fingerPrint"),facial:this.$t("settings.facial")}[e];this.checkIsSoterEnrolledInDevice({checkAuthMode:e,title:t}).then((()=>{console.log(e,t),uni.startSoterAuthentication({requestAuthModes:[e],challenge:"123456",authContent:this.$t("settings.please")+` ${t}`,complete:e=>{console.log(e)},success:e=>{if(console.log(e),0==e.errCode)return m({title:`${t}`+this.$t("settings.successText"),icon:"none"});m({title:this.$t("settings.failTip"),icon:"none"})},fail:e=>{console.log(e),console.log(`认证失败:${e.errCode}`),m({title:this.$t("settings.authFailed"),icon:"none"})}})}))},checkIsSoterEnrolledInDevice({checkAuthMode:e,title:t}){return new Promise(((i,n)=>{uni.checkIsSoterEnrolledInDevice({checkAuthMode:e,success:e=>{if(console.log(e),e.isEnrolled)return i(e);m({title:this.$t("settings.deviceNoOpen")+`${t}`,icon:"none"}),n(e)},fail:e=>{console.log(e),m({title:`${t}`+this.$t("settings.fail"),icon:"none"}),n(e)}})}))},clickLogout(){this.hasLogin?v({title:this.$t("settings.tips"),content:this.$t("settings.exitLogin"),cancelText:this.$t("settings.cancelText"),confirmText:this.$t("settings.confirmText"),success:e=>{e.confirm&&(this.logout(),b())},fail:()=>{},complete:()=>{}}):f({url:"/pages/ucenter/login-page/index/index"})},clearTmp(){k({title:this.$t("settings.clearing"),mask:!0}),I({success:e=>{e.fileList.length>0?uni.removeSavedFile({filePath:e.fileList[0].filePath,complete:e=>{console.log(e),O(),m({title:this.$t("settings.clearedSuccessed"),icon:"none"})}}):(O(),m({title:this.$t("settings.clearedSuccessed"),icon:"none"}))},complete:e=>{console.log(e)}})},changeLanguage(){console.log("语言切换"),$({itemList:["English","简体中文"],success:e=>{console.log(e.tapIndex);let t=p("CURRENT_LANG");if(!e.tapIndex&&"zh-Hans"==t||e.tapIndex&&"en"==t){const i=g().globalData;t=i.locale="en"===t?"zh-Hans":"en",L("CURRENT_LANG",t),g().globalData.$i18n.locale=t,this.currentLanguage=e.tapIndex?"简体中文":"English",x&&x(t),T({url:"/pages/list/list",complete:()=>{P("changeLanguage",t)}})}},fail:()=>{},complete:()=>{}})}})},[["render",function(e,t,i,n,s,o){const a=U(w("uni-list-item"),R),l=U(w("uni-list"),D),r=N,c=M;return y(),A(c,{class:"content"},{default:S((()=>[_(l,{class:"mt10",border:!1},{default:S((()=>[_(a,{title:e.$t("settings.userInfo"),to:"/pages/ucenter/userinfo/userinfo",link:"navigateTo"},null,8,["title"]),e.userInfo.mobile?(y(),A(a,{key:0,title:e.$t("settings.changePassword"),to:"/pages/ucenter/login-page/pwd-retrieve/pwd-retrieve?phoneNumber="+e.userInfo.mobile,link:"navigateTo"},null,8,["title","to"])):j("",!0)])),_:1}),_(l,{class:"mt10",border:!1},{default:S((()=>[o.i18nEnable?(y(),A(a,{key:0,title:e.$t("settings.changeLanguage"),onClick:o.changeLanguage,rightText:s.currentLanguage,link:""},null,8,["title","onClick","rightText"])):j("",!0)])),_:1}),_(l,{class:"mt10",border:!1},{default:S((()=>[_(a,{onClick:o.deactivate,title:e.$t("settings.deactivate"),link:"navigateTo"},null,8,["onClick","title"])])),_:1}),_(c,{class:"bottom-back",onClick:o.clickLogout},{default:S((()=>[e.hasLogin?(y(),A(r,{key:0,class:"bottom-back-text"},{default:S((()=>[E(C(e.$t("settings.logOut")),1)])),_:1})):(y(),A(r,{key:1,class:"bottom-back-text"},{default:S((()=>[E(C(e.$t("settings.login")),1)])),_:1}))])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-39a561b4"]]);export{H as default};
