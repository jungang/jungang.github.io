import{n as e,P as a,S as s,Q as o,o as t,c as n,w as i,b as r,j as l,t as c,q as d,l as p,I as u,f as m,_ as g,i as h}from"./index.9588ac03.js";import{_ as w}from"./uni-captcha.c233070d.js";import{r as f}from"./uni-app.es.3623048a.js";import{_}from"./uni-agreements.a8233936.js";import{_ as b}from"./uni-quick-login.c18c283a.js";import{m as L}from"./login-page.mixin.cd7c5eb8.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.66bbb871.js";import"./loginSuccess.1c927c71.js";var C=k({mixins:[L],data:()=>({password:"",username:"",agree:!1,captcha:"",needCaptcha:!1}),computed:{canLogin(){return this.username.length&&this.isPwd&&this.agree},isPwd(){return/^.{6,20}$/.test(this.password)},isPhone(){return/^1\d{10}$/.test(this.phone)}},methods:{toRetrievePwd(){e({url:"../pwd-retrieve/pwd-retrieve?phoneNumber="+(this.isPhone?this.username:"")+"&phoneArea="+this.currenPhoneArea})},pwdLogin(){if(!this.agree)return a({title:this.$t("common.noAgree"),icon:"none"});s.callFunction({name:"uni-id-cf",data:{action:"login",params:{username:this.username,password:this.password,captcha:this.captcha}},success:({result:e})=>{console.log(e),0===e.code?this.loginSuccess(e):e.needCaptcha?(a({title:e.msg||"完成",icon:"none"}),this.needCaptcha=!0):o({title:this.$t("common.error"),content:e.msg,showCancel:!1,confirmText:this.$t("common.gotIt")})}})},toRegister(a){console.log(a),e({url:"/pages/ucenter/login-page/register/register"})}}},[["render",function(e,a,s,o,L,k){const C=p,$=u,j=f(m("uni-captcha"),w),P=f(m("uni-agreements"),_),x=g,V=h,v=f(m("uni-quick-login"),b);return t(),n(V,{class:"content"},{default:i((()=>[r(C,{class:"title"},{default:i((()=>[l(c(e.$t("pwdLogin.pwdLogin")),1)])),_:1}),r($,{class:"input-box",inputBorder:!1,modelValue:L.username,"onUpdate:modelValue":a[0]||(a[0]=e=>L.username=e),placeholder:e.$t("pwdLogin.placeholder")},null,8,["modelValue","placeholder"]),r($,{type:"password",class:"input-box",inputBorder:!1,modelValue:L.password,"onUpdate:modelValue":a[1]||(a[1]=e=>L.password=e),placeholder:e.$t("pwdLogin.passwordPlaceholder")},null,8,["modelValue","placeholder"]),L.needCaptcha?(t(),n(j,{key:0,scene:"login",modelValue:L.captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>L.captcha=e)},null,8,["modelValue"])):d("",!0),r(P,{class:"agreement",onSetAgree:a[3]||(a[3]=e=>L.agree=e)}),r(x,{class:"send-btn",disabled:!k.canLogin,type:k.canLogin?"primary":"default",onClick:k.pwdLogin},{default:i((()=>[l(c(e.$t("pwdLogin.login")),1)])),_:1},8,["disabled","type","onClick"]),r(V,{class:"auth-box"},{default:i((()=>[r(C,{class:"link",onClick:k.toRetrievePwd},{default:i((()=>[l(c(e.$t("pwdLogin.forgetPassword")),1)])),_:1},8,["onClick"]),r(C,{class:"link",onClick:k.toRegister},{default:i((()=>[l(c(e.$t("pwdLogin.register")),1)])),_:1},8,["onClick"])])),_:1}),r(v,{agree:L.agree,ref:"uniQuickLogin"},null,8,["agree"])])),_:1})}],["__scopeId","data-v-39b1c07c"]]);export{C as default};
