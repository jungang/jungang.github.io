import{ac as e,W as a,V as r,X as t,R as s,s as o,o as n,c as l,w as i,b as m,d as u,t as d,l as c,m as p,i as f}from"./index.efa6eab6.js";import{_ as h}from"./uni-easyinput.bdf74274.js";import{r as g}from"./uni-app.es.2c453ccb.js";import{_ as w}from"./uni-forms-item.533700d2.js";import{_ as b}from"./uni-captcha.9e77a335.js";import{_ as V}from"./uni-agreements.59c17316.js";import{_ as D}from"./uni-forms.3a5ad40c.js";import{m as _}from"./login-page.mixin.a420ea4d.js";import{_ as y}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.e62a94a4.js";import"./loginSuccess.f4ff3633.js";var L={username:{rules:[{required:!0,errorMessage:"请输入用户名"},{minLength:3,maxLength:32,errorMessage:"用户名长度在 {minLength} 到 {maxLength} 个字符"},{validateFunction:function(e,a,r,t){return console.log(a),(/^1\d{10}$/.test(a)||/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(a))&&t("用户名不能是：手机号或邮箱"),!0}}],label:"用户名"},password:{rules:[{required:!0,errorMessage:"请输入密码"},{minLength:6,maxLength:20,errorMessage:"密码长度在 {minLength} 到 {maxLength} 个字符"}],label:"密码"},pwd2:{rules:[{required:!0,errorMessage:"再次输入密码"},{minLength:6,maxLength:20,errorMessage:"密码长度在 {minLength} 到 {maxLength} 个字符"},{validateFunction:function(e,a,r,t){return console.log(a),a!=r.password&&t("两次输入密码不一致"),!0}}],label:"确认密码"}};var x=y({mixins:[_],data:()=>({formData:{username:"",nickname:"",password:"",pwd2:"",captcha:""},rules:L,agree:!1}),computed:{canSubmit(){return this.formData.username.length&&this.formData.password.length&&4==this.formData.captcha.length&&this.agree}},onReady(){this.$refs.form.setRules(this.rules)},onLoad(){e({title:this.$t("register.navigationBarTitle")})},methods:{submit(){if(!this.agree)return a({title:this.$t("common.noAgree"),icon:"none"});r({mask:!0}),this.$refs.form.validate().then((e=>{this.submitForm(e)})).catch((e=>{console.log(e)})).finally((()=>{t()}))},submitForm(e){s.callFunction({name:"uni-id-cf",data:{action:"register",params:e},success:({result:e})=>{console.log(e),0===e.code?this.loginSuccess(e):o({content:e.msg,showCancel:!1})}})}}},[["render",function(e,a,r,t,s,o){const _=g(c("uni-easyinput"),h),y=g(c("uni-forms-item"),w),L=g(c("uni-captcha"),b),x=g(c("uni-agreements"),V),j=p,v=g(c("uni-forms"),D),$=f;return n(),l($,{class:"uni-container"},{default:i((()=>[m(v,{ref:"form",value:s.formData,rules:s.rules,"validate-trigger":"submit","err-show-type":"undertext"},{default:i((()=>[m(y,{name:"username",required:""},{default:i((()=>[m(_,{inputBorder:!1,class:"easyinput",placeholder:e.$t("register.usernamePlaceholder"),modelValue:s.formData.username,"onUpdate:modelValue":a[0]||(a[0]=e=>s.formData.username=e),trim:"both"},null,8,["placeholder","modelValue"])])),_:1}),m(y,{name:"nickname"},{default:i((()=>[m(_,{inputBorder:!1,class:"easyinput",placeholder:e.$t("register.nicknamePlaceholder"),modelValue:s.formData.nickname,"onUpdate:modelValue":a[1]||(a[1]=e=>s.formData.nickname=e),trim:"both"},null,8,["placeholder","modelValue"])])),_:1}),m(y,{name:"password",modelValue:s.formData.password,"onUpdate:modelValue":a[3]||(a[3]=e=>s.formData.password=e),required:""},{default:i((()=>[m(_,{inputBorder:!1,class:"easyinput",placeholder:e.$t("register.passwordDigitsPlaceholder"),type:"password",modelValue:s.formData.password,"onUpdate:modelValue":a[2]||(a[2]=e=>s.formData.password=e),trim:"both"},null,8,["placeholder","modelValue"])])),_:1},8,["modelValue"]),m(y,{name:"pwd2",modelValue:s.formData.pwd2,"onUpdate:modelValue":a[5]||(a[5]=e=>s.formData.pwd2=e),required:""},{default:i((()=>[m(_,{inputBorder:!1,class:"easyinput",placeholder:e.$t("register.passwordAgain"),type:"password",modelValue:s.formData.pwd2,"onUpdate:modelValue":a[4]||(a[4]=e=>s.formData.pwd2=e),trim:"both"},null,8,["placeholder","modelValue"])])),_:1},8,["modelValue"]),m(y,{name:"captcha",required:""},{default:i((()=>[m(L,{scene:"register",modelValue:s.formData.captcha,"onUpdate:modelValue":a[6]||(a[6]=e=>s.formData.captcha=e)},null,8,["modelValue"])])),_:1}),m(x,{onSetAgree:a[7]||(a[7]=e=>s.agree=e)}),m(j,{class:"send-btn",disabled:!o.canSubmit,type:o.canSubmit?"primary":"default",onClick:o.submit},{default:i((()=>[u(d(e.$t("register.registerAndLogin")),1)])),_:1},8,["disabled","type","onClick"])])),_:1},8,["value","rules"])])),_:1})}],["__scopeId","data-v-5c1142a7"]]);export{x as default};
