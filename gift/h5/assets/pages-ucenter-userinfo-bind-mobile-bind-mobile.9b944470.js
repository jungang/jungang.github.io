var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(a,o,t)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t;import{a2 as i,S as c,P as l,a5 as p,o as m,c as u,w as d,b as f,j as b,f as h,_ as y,i as j}from"./index.18541c3e.js";import{_ as D}from"./uni-easyinput.94074e4d.js";import{r as g}from"./uni-app.es.aff9600a.js";import{_ as P}from"./uni-send-sms-code.f36c1e99.js";import{_}from"./uni-popup-captcha.baba1c96.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.1f9744ac.js";import"./uni-captcha.63ef1ad1.js";import"./uni-popup.5a80fa5b.js";const v={data:()=>({currenPhoneArea:"",formData:{phone:"",code:"",captcha:!1}}),computed:{tipText(){return`验证码已通过短信发送至${this.currenPhoneArea} ${this.formData.mobile}。密码为6 - 20位`},canSubmit(){return this.isPhone()&&this.isCode()}},onLoad(e){},onReady(){},methods:(x=((e,a)=>{for(var o in a||(a={}))r.call(a,o)&&s(e,o,a[o]);if(t)for(var o of t(a))n.call(a,o)&&s(e,o,a[o]);return e})({},i({setUserInfo:"user/login"})),O={submit(){console.log(this.formData),c.callFunction({name:"uni-id-cf",data:{action:"bindMobileBySms",params:this.formData},success:({result:e})=>{if(console.log(e),l({title:e.msg||e.errMsg,icon:"none"}),"CAPTCHA_REQUIRED"==e.errCode)return this.$refs["popup-captcha"].open();0===e.code&&(this.setUserInfo({mobile:e.mobile}),p())},complete:()=>{this.formData.captcha=!1}})},isPhone(){return/^1\d{10}$/.test(this.formData.mobile)},isCode(){return/^\d{6}$/.test(this.formData.code)}},a(x,o(O)))};var x,O;var V=C(v,[["render",function(e,a,o,t,r,n){const s=g(h("uni-easyinput"),D),i=g(h("uni-send-sms-code"),P),c=y,l=g(h("uni-popup-captcha"),_),p=j;return m(),u(p,{class:"uni-content"},{default:d((()=>[f(s,{clearable:"",focus:"",type:"number",class:"input-box",inputBorder:!1,modelValue:r.formData.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.mobile=e),maxlength:"11",placeholder:"请输入手机号"},null,8,["modelValue"]),f(s,{clearable:"",type:"number",class:"input-box",inputBorder:!1,modelValue:r.formData.code,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.code=e),maxlength:"6",placeholder:e.$t("common.verifyCodePlaceholder")},{right:d((()=>[f(i,{ref:"shortCode","code-type":"bind",phone:r.formData.mobile},null,8,["phone"])])),_:1},8,["modelValue","placeholder"]),f(c,{class:"uni-btn send-btn-box",disabled:!n.canSubmit,type:n.canSubmit?"primary":"default",onClick:n.submit},{default:d((()=>[b("提交")])),_:1},8,["disabled","type","onClick"]),f(l,{ref:"popup-captcha",onConfirm:n.submit,modelValue:r.formData.captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.captcha=e),scene:"bindMobileBySms"},null,8,["onConfirm","modelValue"])])),_:1})}],["__scopeId","data-v-f3c4dfd2"]]);export{V as default};
