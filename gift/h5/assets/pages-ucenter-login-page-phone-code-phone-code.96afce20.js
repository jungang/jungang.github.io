import{S as e,P as o,o as a,c as s,w as t,b as n,j as i,t as c,l as p,f as r,_ as m,i as u}from"./index.18541c3e.js";import{_ as l}from"./uni-send-sms-code.f36c1e99.js";import{r as d}from"./uni-app.es.aff9600a.js";import{_ as h}from"./uni-easyinput.94074e4d.js";import{_ as f}from"./uni-forms.7a748625.js";import{_ as b}from"./uni-quick-login.88b338a0.js";import{_ as g}from"./uni-popup-captcha.baba1c96.js";import{m as _}from"./login-page.mixin.52565376.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.1f9744ac.js";import"./loginSuccess.1f625296.js";import"./uni-captcha.63ef1ad1.js";import"./uni-popup.5a80fa5b.js";var y=j({mixins:[_],data:()=>({code:"",phone:"",captcha:!1}),computed:{tipText(){return this.$t("common.verifyCodeSend")+`${this.phone}ã€‚`},canSubmit(){return 6==this.code.length}},onLoad({phoneNumber:e,phoneArea:o}){this.phone=e},onReady(){11==this.phone.length&&this.$refs.sendSmsCode.start()},methods:{submit(){e.callFunction({name:"uni-id-cf",data:{action:"loginBySms",params:{mobile:this.phone,code:this.code,captcha:this.captcha}},success:({result:e})=>{if(o({title:e.msg||e.errMsg,icon:"none"}),"CAPTCHA_REQUIRED"==e.errCode)return this.$refs["popup-captcha"].open();0===e.code&&this.loginSuccess(e)},complete:()=>{this.captcha=!1}})}}},[["render",function(e,o,_,j,y,C){const S=p,x=d(r("uni-send-sms-code"),l),$=d(r("uni-easyinput"),h),v=m,V=d(r("uni-forms"),f),k=d(r("uni-quick-login"),b),P=d(r("uni-popup-captcha"),g),A=u;return a(),s(A,{class:"content"},{default:t((()=>[n(S,{class:"tit"},{default:t((()=>[i(c(e.$t("common.verifyCodePlaceholder")),1)])),_:1}),n(S,{class:"tip"},{default:t((()=>[i(c(C.tipText),1)])),_:1}),n(V,null,{default:t((()=>[n($,{type:"number",class:"easyinput",inputBorder:!1,modelValue:y.code,"onUpdate:modelValue":o[0]||(o[0]=e=>y.code=e),maxlength:"6",placeholder:e.$t("common.verifyCodePlaceholder")},{right:t((()=>[n(x,{phone:y.phone,ref:"sendSmsCode"},null,8,["phone"])])),_:1},8,["modelValue","placeholder"]),n(v,{class:"send-btn",disabled:!C.canSubmit,type:C.canSubmit?"primary":"default",onClick:C.submit},{default:t((()=>[i(c(e.$t("common.login")),1)])),_:1},8,["disabled","type","onClick"])])),_:1}),n(k,{agree:""}),n(P,{onConfirm:C.submit,ref:"popup-captcha",modelValue:y.captcha,"onUpdate:modelValue":o[1]||(o[1]=e=>y.captcha=e),scene:"loginBySms"},null,8,["onConfirm","modelValue"])])),_:1})}],["__scopeId","data-v-b5bf0ea2"]]);export{y as default};
