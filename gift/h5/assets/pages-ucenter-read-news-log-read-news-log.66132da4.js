import{g as e,a9 as a,s as t,n as o,o as s,c as i,w as r,b as l,e as n,r as d,F as c,f as u,i as m,j as f,t as h,l as p}from"./index.18541c3e.js";import{_ as g}from"./uni-dateformat.a1c3a06c.js";import{r as _}from"./uni-app.es.aff9600a.js";import{_ as b}from"./uni-list-item.7e7ca9e7.js";import{_ as w}from"./uni-list.c0a0c801.js";import{_ as L}from"./uni-load-state.ebbedc26.js";import{_ as j}from"./unicloud-db.c9c7daa2.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.1f9744ac.js";var y=k({data:()=>({isLoading:!0,loadMore:{contentdown:"",contentrefresh:"",contentnomore:""},readNewsLog:[],udbWhere:""}),onLoad(){this.readNewsLog=e("readNewsLog")||[];let t=this.readNewsLog.map((({article_id:e})=>e));console.log(typeof t,t),this.udbWhere=`"_id" in ${JSON.stringify(t)}`,a({title:this.$t("newsLog.navigationBarTitle")})},onPullDownRefresh(){this.refreshData()},onReachBottom(){this.$refs.udb.loadMore()},methods:{refreshData(){this.$refs.udb.loadData({clear:!0},(e=>{console.log(e),t()}))},handleItemClick(e){console.log(e),o({url:"/pages/list/detail?id="+e._id+"&title="+e.title})}}},[["render",function(e,a,t,o,k,y){const N=p,M=_(u("uni-dateformat"),g),D=m,v=_(u("uni-list-item"),b),C=_(u("uni-list"),w),R=_(u("uni-load-state"),L),$=_(u("unicloud-db"),j);return s(),i(D,{class:"container"},{default:r((()=>[l($,{ref:"udb",where:k.udbWhere,collection:"opendb-news-articles",onLoad:a[0]||(a[0]=e=>0==k.isLoading),onError:a[1]||(a[1]=e=>0==k.isLoading),field:"title,_id","page-size":10},{default:r((({data:e,pagination:a,loading:t,hasMore:o,error:u})=>[l(C,null,{default:r((()=>[(s(!0),n(c,null,d(e,((e,a)=>(s(),i(v,{key:a,clickable:!0,onClick:a=>y.handleItemClick(e)},{body:r((()=>[l(D,{class:"item"},{default:r((()=>[l(N,null,{default:r((()=>[f(h(e.title),1)])),_:2},1024),l(M,{class:"article-date",date:k.readNewsLog[a].last_time,format:"yyyy-MM-dd hh:mm",threshold:[0,0]},null,8,["date"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024),l(R,{onNetworkResume:y.refreshData,state:{data:e,pagination:a,hasMore:o,loading:t,error:u}},null,8,["onNetworkResume","state"])])),_:1},8,["where"])])),_:1})}],["__scopeId","data-v-a02d7482"]]);export{y as default};
