import{R as e,W as o,o as a,c as s,w as t,b as n,d as i,t as c,f as p,l as r,m,i as d}from"./index.45e10b73.js";import{_ as u}from"./uni-send-sms-code.80002855.js";import{r as l}from"./uni-app.es.af6e5358.js";import{_ as h}from"./uni-easyinput.d7f9f53b.js";import{_ as f}from"./uni-forms.da2dce3e.js";import{_ as b}from"./uni-quick-login.e139723e.js";import{_ as g}from"./uni-popup-captcha.0837ee8f.js";import{m as _}from"./login-page.mixin.166cdfe7.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.4aeae8d3.js";import"./loginSuccess.4a3b8f3c.js";import"./uni-captcha.0a325143.js";import"./uni-popup.c41ffb1b.js";var y=j({mixins:[_],data:()=>({code:"",phone:"",captcha:!1}),computed:{tipText(){return this.$t("common.verifyCodeSend")+`${this.phone}ã€‚`},canSubmit(){return 6==this.code.length}},onLoad({phoneNumber:e,phoneArea:o}){this.phone=e},onReady(){11==this.phone.length&&this.$refs.sendSmsCode.start()},methods:{submit(){e.callFunction({name:"uni-id-cf",data:{action:"loginBySms",params:{mobile:this.phone,code:this.code,captcha:this.captcha}},success:({result:e})=>{if(o({title:e.msg||e.errMsg,icon:"none"}),"CAPTCHA_REQUIRED"==e.errCode)return this.$refs["popup-captcha"].open();0===e.code&&this.loginSuccess(e)},complete:()=>{this.captcha=!1}})}}},[["render",function(e,o,_,j,y,C){const S=p,x=l(r("uni-send-sms-code"),u),$=l(r("uni-easyinput"),h),v=m,V=l(r("uni-forms"),f),k=l(r("uni-quick-login"),b),R=l(r("uni-popup-captcha"),g),A=d;return a(),s(A,{class:"content"},{default:t((()=>[n(S,{class:"tit"},{default:t((()=>[i(c(e.$t("common.verifyCodePlaceholder")),1)])),_:1}),n(S,{class:"tip"},{default:t((()=>[i(c(C.tipText),1)])),_:1}),n(V,null,{default:t((()=>[n($,{type:"number",class:"easyinput",inputBorder:!1,modelValue:y.code,"onUpdate:modelValue":o[0]||(o[0]=e=>y.code=e),maxlength:"6",placeholder:e.$t("common.verifyCodePlaceholder")},{right:t((()=>[n(x,{phone:y.phone,ref:"sendSmsCode"},null,8,["phone"])])),_:1},8,["modelValue","placeholder"]),n(v,{class:"send-btn",disabled:!C.canSubmit,type:C.canSubmit?"primary":"default",onClick:C.submit},{default:t((()=>[i(c(e.$t("common.login")),1)])),_:1},8,["disabled","type","onClick"])])),_:1}),n(k,{agree:""}),n(R,{onConfirm:C.submit,ref:"popup-captcha",modelValue:y.captcha,"onUpdate:modelValue":o[1]||(o[1]=e=>y.captcha=e),scene:"loginBySms"},null,8,["onConfirm","modelValue"])])),_:1})}],["__scopeId","data-v-7218d7c3"]]);export{y as default};
