var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,o=(e,o)=>{for(var n in o||(o={}))t.call(o,n)&&l(e,n,o[n]);if(a)for(var n of a(o))r.call(o,n)&&l(e,n,o[n]);return e};import{R as n,V as m,X as s,W as u,a8 as i,s as d,o as f,c as p,w as c,b,d as y,l as _,h,m as v,i as V}from"./index.45e10b73.js";import{_ as g}from"./uni-easyinput.d7f9f53b.js";import{r as j}from"./uni-app.es.af6e5358.js";import{_ as D}from"./uni-forms-item.f6dc14d2.js";import{_ as w}from"./uni-forms.da2dce3e.js";import{v as O}from"./performance-log.11745477.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.4aeae8d3.js";const U=n.database();function x(e){let a={};for(let t in O)e.indexOf(t)>-1&&(a[t]=O[t]);return a}var C=k({data(){let e={event_key:null,array_length:null,event_type:"",comment:"",browser:null};return{formData:e,formOptions:{},rules:o({},x(Object.keys(e)))}},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){m({mask:!0}),this.$refs.form.validate().then((e=>this.submitForm(e))).catch((()=>{})).finally((()=>{s()}))},submitForm(e){return U.collection("performance-log").add(e).then((e=>{u({icon:"none",title:"新增成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>i()),500)})).catch((e=>{d({content:e.message||"请求服务失败",showCancel:!1})}))}}},[["render",function(e,a,t,r,l,o){const n=j(_("uni-easyinput"),g),m=j(_("uni-forms-item"),D),s=h("undefined"),u=v,i=V,d=j(_("uni-forms"),w);return f(),p(i,{class:"uni-container"},{default:c((()=>[b(d,{ref:"form",value:l.formData,"validate-trigger":"submit","err-show-type":"toast"},{default:c((()=>[b(m,{name:"event_key",label:""},{default:c((()=>[b(n,{placeholder:"毫秒数",type:"number",modelValue:l.formData.event_key,"onUpdate:modelValue":a[0]||(a[0]=e=>l.formData.event_key=e)},null,8,["modelValue"])])),_:1}),b(m,{name:"array_length",label:""},{default:c((()=>[b(n,{placeholder:"数组长度",type:"number",modelValue:l.formData.array_length,"onUpdate:modelValue":a[1]||(a[1]=e=>l.formData.array_length=e)},null,8,["modelValue"])])),_:1}),b(m,{name:"event_type",label:""},{default:c((()=>[b(n,{placeholder:"事件类型",modelValue:l.formData.event_type,"onUpdate:modelValue":a[2]||(a[2]=e=>l.formData.event_type=e)},null,8,["modelValue"])])),_:1}),b(m,{name:"comment",label:""},{default:c((()=>[b(n,{placeholder:"备注，事件新增、缘由",modelValue:l.formData.comment,"onUpdate:modelValue":a[3]||(a[3]=e=>l.formData.comment=e),trim:"both"},null,8,["modelValue"])])),_:1}),b(m,{name:"browser",label:""},{default:c((()=>[b(s,{modelValue:l.formData.browser,"onUpdate:modelValue":a[4]||(a[4]=e=>l.formData.browser=e)},null,8,["modelValue"])])),_:1}),b(i,{class:"uni-button-group"},{default:c((()=>[b(u,{type:"primary",class:"uni-button",onClick:o.submit},{default:c((()=>[y("提交")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["value"])])),_:1})}],["__scopeId","data-v-1f4a902d"]]);export{C as default};
